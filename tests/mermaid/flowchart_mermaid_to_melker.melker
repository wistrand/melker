<melker>
<policy>
{
  "name": "Graph: tests/mermaid/flowchart_mermaid_to_melker.mmd"
}
</policy>

<style>
.graph {
  width: fill;
  height: fill;
  padding: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 5;
  align-items: flex-start;
  align-content: flex-start;
  flex-shrink: 0;
}
.graph-row { flex-direction: row; }
.graph-col { flex-direction: column; }

.subgraph {
  border: thin;
  padding: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 4;
}
.subgraph-row { flex-direction: row; }
.subgraph-col { flex-direction: column; }

.node {
  border: thin;
  padding: 0 1;
  flex-shrink: 0;
}
.node-diamond { border: double; }
.node-hexagon { border: thick; }
</style>

<container class="graph graph-col" scrollable="true">
  <!-- Subgraph: Input -->
  <container id="graph-subgraph-Input" class="subgraph subgraph-row" style="border-title: Input">
    <container id="graph-node-MMD" class="node">
      <text>.mmd Mermaid file</text>
    </container>
    <container id="graph-node-JSON" class="node">
      <text>.json Graph file</text>
    </container>
  </container>

  <!-- Subgraph: Detection -->
  <container id="graph-subgraph-Detection" class="subgraph subgraph-row" style="border-title: Detection">
    <container id="graph-node-DETECT" class="node">
      <text>detectParserType</text>
    </container>
    <container id="graph-node-SEQ_MATCH" class="node">
      <text>sequenceDiagram?</text>
    </container>
    <container id="graph-node-CLASS_MATCH" class="node">
      <text>classDiagram?</text>
    </container>
    <container id="graph-node-FLOW_MATCH" class="node">
      <text>flowchart/graph?</text>
    </container>
  </container>

  <!-- Subgraph: Parsers -->
  <container id="graph-subgraph-Parsers" class="subgraph subgraph-row" style="border-title: Parsers">
    <container id="graph-node-JP" class="node">
      <text>JsonParser</text>
    </container>
    <container id="graph-node-SP" class="node">
      <text>SequenceParser</text>
    </container>
    <container id="graph-node-CP" class="node">
      <text>ClassDiagramParser</text>
    </container>
    <container id="graph-node-MP" class="node">
      <text>MermaidParser</text>
    </container>
  </container>

  <!-- Subgraph: IntermediateReps -->
  <container id="graph-subgraph-IntermediateReps" class="subgraph subgraph-row" style="border-title: IntermediateReps">
    <container id="graph-node-SD" class="node">
      <text>SequenceDefinition</text>
    </container>
    <container id="graph-node-CD" class="node">
      <text>ClassDiagramDefinition</text>
    </container>
    <container id="graph-node-GD" class="node">
      <text>GraphDefinition</text>
    </container>
  </container>

  <!-- Subgraph: LayoutEngine -->
  <container id="graph-subgraph-LayoutEngine" class="subgraph subgraph-row" style="border-title: LayoutEngine">
    <container id="graph-node-LAYOUT" class="node">
      <text>GraphLayout</text>
    </container>
    <container id="graph-node-CALC" class="node">
      <text>calculateLayout</text>
    </container>
  </container>

  <!-- Subgraph: Converters -->
  <container id="graph-subgraph-Converters" class="subgraph subgraph-row" style="border-title: Converters">
    <container id="graph-node-S2M" class="node">
      <text>sequenceToMelker</text>
    </container>
    <container id="graph-node-C2M" class="node">
      <text>classToMelker</text>
    </container>
    <container id="graph-node-G2M" class="node">
      <text>graphToMelker</text>
    </container>
  </container>

  <!-- Subgraph: OutputXML -->
  <container id="graph-subgraph-OutputXML" class="subgraph subgraph-row" style="border-title: OutputXML">
    <container id="graph-node-CONTAINER" class="node">
      <text>container tag</text>
    </container>
    <container id="graph-node-TABLE" class="node">
      <text>table tag</text>
    </container>
    <container id="graph-node-POLICY" class="node">
      <text>policy tag</text>
    </container>
    <container id="graph-node-STYLE" class="node">
      <text>style tag</text>
    </container>
    <container id="graph-node-CONN" class="node">
      <text>connector tag</text>
    </container>
    <container id="graph-node-SEP" class="node">
      <text>separator tag</text>
    </container>
    <container id="graph-node-TEXT" class="node">
      <text>text tag</text>
    </container>
    <container id="graph-node-MELKER" class="node">
      <text>melker tag</text>
    </container>
  </container>


  <!-- Connectors -->
  <connector from="graph-node-MMD" to="graph-node-DETECT" arrow="end" />
  <connector from="graph-node-JSON" to="graph-node-JP" arrow="end" />
  <connector from="graph-node-DETECT" to="graph-node-SEQ_MATCH" arrow="end" />
  <connector from="graph-node-DETECT" to="graph-node-CLASS_MATCH" arrow="end" />
  <connector from="graph-node-DETECT" to="graph-node-FLOW_MATCH" arrow="end" />
  <connector from="graph-node-SEQ_MATCH" to="graph-node-SP" arrow="end" />
  <connector from="graph-node-CLASS_MATCH" to="graph-node-CP" arrow="end" />
  <connector from="graph-node-FLOW_MATCH" to="graph-node-MP" arrow="end" />
  <connector from="graph-node-JP" to="graph-node-GD" arrow="end" />
  <connector from="graph-node-MP" to="graph-node-GD" arrow="end" />
  <connector from="graph-node-SP" to="graph-node-SD" arrow="end" />
  <connector from="graph-node-CP" to="graph-node-CD" arrow="end" />
  <connector from="graph-node-GD" to="graph-node-CALC" arrow="end" />
  <connector from="graph-node-CD" to="graph-node-CALC" arrow="end" />
  <connector from="graph-node-CALC" to="graph-node-LAYOUT" arrow="end" />
  <connector from="graph-node-GD" to="graph-node-G2M" arrow="end" />
  <connector from="graph-node-LAYOUT" to="graph-node-G2M" arrow="end" />
  <connector from="graph-node-SD" to="graph-node-S2M" arrow="end" />
  <connector from="graph-node-CD" to="graph-node-C2M" arrow="end" />
  <connector from="graph-node-LAYOUT" to="graph-node-C2M" arrow="end" />
  <connector from="graph-node-G2M" to="graph-node-MELKER" arrow="end" />
  <connector from="graph-node-S2M" to="graph-node-MELKER" arrow="end" />
  <connector from="graph-node-C2M" to="graph-node-MELKER" arrow="end" />
  <connector from="graph-node-MELKER" to="graph-node-POLICY" arrow="end" />
  <connector from="graph-node-MELKER" to="graph-node-STYLE" arrow="end" />
  <connector from="graph-node-MELKER" to="graph-node-CONTAINER" arrow="end" />
  <connector from="graph-node-MELKER" to="graph-node-TABLE" arrow="end" />
  <connector from="graph-node-CONTAINER" to="graph-node-CONN" arrow="end" />
  <connector from="graph-node-CONTAINER" to="graph-node-TEXT" arrow="end" />
  <connector from="graph-node-CONTAINER" to="graph-node-SEP" arrow="end" />
  <connector from="graph-node-TABLE" to="graph-node-TEXT" arrow="end" />
</container>
</melker>